<script>
	function json_includes_by(json,obj,val){
	  return json.some(d=>{
		  if(val in d && val in obj){
			  return d[val]===obj[val]
			}
		})
	}
	function findIndex_all_by(arr,brr,attr){
	  return arr.reduce((pre,cur,i)=>{
		  if(json_includes_by(brr,cur,attr)) pre.push(i)
			return pre
		},[])
	}
	const arr= [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }],
	brr=[{ 'x': 1 }, { 'x': 3 }];
	console.log(findIndex_all_by(arr,brr,'x'))
</script>